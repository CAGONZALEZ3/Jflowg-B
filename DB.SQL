-- Se crea la base de datos
CREATE DATABASE IF NOT EXISTS JFLOWG;
-- se usa la base de datos
USE JFLOWG;
-- se crea la tabla de categoria de productos
CREATE TABLE IF NOT EXISTS JF_TIP_PRODUCT(
    TIP_ID int PRIMARY key AUTO_INCREMENT,
    TIP_NAME VARCHAR(255),
    TIP_DESCRIPTION VARCHAR(255),
    TIP_USER_CREATION VARCHAR(255),
    TIP_DATE_CREATION DATE ,
    TIP_USER_UPDATE VARCHAR(255),
    TIP_DATE_UPDATE DATE
    );

CREATE TABLE IF NOT EXISTS JF_PRODUCT(
    PRO_ID INT PRIMARY KEY AUTO_INCREMENT,
    PRO_TIP_ID INT,
    PRO_NAME VARCHAR(255),
    PRO_DESCRIPTION VARCHAR(255),
    PRO_IMAGE INT, -- va con la tabla photos
    PRO_CANTIDAD INT,
    PRO_PRECIO DOUBLE,
    PRO_DESCUENTO VARCHAR(1) DEFAULT "N",-- S O N
    PRO_USER_CREATION VARCHAR(255),
    PRO_DATE_CREATION DATE ,
    PRO_USER_UPDATE VARCHAR(255),
    PRO_DATE_UPDATE DATE,
    FOREIGN KEY (PRO_TIP_ID) REFERENCES JF_TIP_PRODUCT(TIP_ID)
    );

CREATE TABLE IF NOT EXISTS JF_FACTURA(
    FAC_ID INT PRIMARY KEY AUTO_INCREMENT,
    FAC_FACTURA INT,
    FAC_DATE DATETIME,
    FAC_STATUS VARCHAR(1), -- P PENDIENTE, E ENVIADO, T ENTREGADO
    FAC_DIRECTION VARCHAR(255),
    FAC_TOTAL DOUBLE,
    FAC_FORMA_PAGO VARCHAR(255),
    FAC_USER_CREATION VARCHAR(255),
    FAC_DATE_CREATION DATE ,
    FAC_USER_UPDATE VARCHAR(255),
    FAC_DATE_UPDATE DATE
    );

CREATE TABLE IF NOT EXISTS JF_FAC_USER(
    FUS_ID INT PRIMARY KEY AUTO_INCREMENT,
    FUS_FAC_ID INT,
    FUS_USER_ID INT, -- SI EXISTE USER ID EN LOGIN ENTRA
    FUS_NAME VARCHAR(255),
    FUS_LASTNAME VARCHAR(255),
    FUS_EMAIL VARCHAR(255),
    FUS_CEDULA VARCHAR(20),
    FUS_CELL VARCHAR(30),
    FUS_DETAILS TEXT,
    FUS_RETIRO VARCHAR(300)
    );

CREATE TABLE IF NOT EXISTS JF_FAC_DETAILS(
    DET_ID INT PRIMARY KEY AUTO_INCREMENT,
    DET_FAC_ID INT,
    DET_PRO_ID INT,
    DET_CANTIDAD INT,
    DET_PREC_UNITARIO DOUBLE,
    DET_DESCUENTO VARCHAR(1),-- S O N
    FOREIGN KEY (DET_FAC_ID) REFERENCES JF_FACTURA(FAC_ID),
    FOREIGN KEY (DET_PRO_ID) REFERENCES JF_PRODUCT(PRO_ID)
);

CREATE TABLE IF NOT EXISTS photos (
    id int,
    path varchar(100),
    name varchar(100)
); 